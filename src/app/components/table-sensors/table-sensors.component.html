<div class="main-content-sensors">
  <div class="sensors-container">

    <div class="container-wrapper">
      <!-- Header -->
      <div class="table-header">
        <div class="header-content">
          <h2 class="table-title">All Devices in analysis</h2>
          <div class="header-actions">
            <app-notifications class="notifications-component"></app-notifications>
          </div>
        </div>
        <div class="header-subtitle">Monitor and analyze all connected devices</div>
      </div>


      <!-- Search Box -->
      <div class="search-box">
        <input
          type="text"
          placeholder="Search devices by name, model, type or status..."
          class="search-input"
          (input)="onSearchInput($event)"
        >
        <span class="search-icon">üîç</span>
      </div>

      <!-- Table -->
      <div class="table-responsive">
        <table class="sensors-table">
          <thead>
            <tr>
              <th>Device Name</th>
              <th>Type</th>
              <th>Model</th>
              <th>Manufacturer</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let sensor of paginatedSensors$ | async"
                (click)="openModalAnaysis(sensor.deviceModel)"
                class="table-row">
              <td data-label="Device Name" class="device-name">
                <span class="name-text">{{sensor.name}}</span>
              </td>
              <td data-label="Type">
                <span class="device-type">{{sensor.type}}</span>
              </td>
              <td data-label="Model" class="current-value">
                {{sensor.deviceModel}}
              </td>
              <td data-label="Manufacturer" class="previous-value">
                {{sensor.manufacturer}}
              </td>
              <td data-label="Status">
                <div class="status-container">
                  <span class="status-indicator"
                        [ngClass]="{
                          'status-active': sensor.status === 'ACTIVE',
                          'status-inactive': sensor.status === 'INACTIVE',
                          'status-warning': sensor.status === 'WARNING'
                        }">
                  </span>
                  <span class="status-text">{{sensor.status}}</span>
                </div>
              </td>
            </tr>
            <tr *ngIf="(paginatedSensors$ | async)?.length === 0">
              <td colspan="5" class="no-data">
                <div class="empty-state">
                  <span class="empty-icon">üì°</span>
                  <p>No devices found</p>
                  <p class="empty-subtext">Try adjusting your search criteria</p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div class="pagination">
        <button
          class="pagination-btn prev-btn"
          (click)="previousPage()"
          [disabled]="(currentPage$ | async) === 1"
          title="Previous Page"
        >
          ‚Üê Previous
        </button>

        <div class="pagination-info">
          <span class="page-number">Page {{ currentPage$ | async }}</span>
          <span class="page-total">of {{ totalPages$ | async }}</span>
        </div>

        <button
          class="pagination-btn next-btn"
          (click)="nextPage()"
          [disabled]="(currentPage$ | async) === (totalPages$ | async)"
          title="Next Page"
        >
          Next ‚Üí
        </button>
      </div>
    </div>

  </div>

  <app-modal-analysis
    *ngIf="modalAnalysis"
    (sendEventcloseModalAnalysis)="consumerEventCloseModalAnalysis()"
    [deviceModal]="deviceModel">
  </app-modal-analysis>
</div>
