<div class="main-content-sensors">
  <div class="sensors-container">

    <div class="container-wrapper">
      <!-- Header -->
      <div class="table-header">
        <div class="header-content">
          <h2 class="table-title">All Devices in analysis</h2>
          <div class="header-actions">
            <app-notifications class="notifications-component"></app-notifications>
          </div>
        </div>
        <div class="header-subtitle">Monitor and analyze all connected devices</div>
      </div>


      <!-- Search Box -->
      <div class="search-box">
        <input
          type="text"
          placeholder="Search devices by name, model, type or status..."
          class="search-input"
          (input)="onSearchInput($event)"
        >
        <span class="search-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
            <path d="M480 272C480 317.9 465.1 360.3 440 394.7L566.6 521.4C579.1 533.9 579.1 554.2 566.6 566.7C554.1 579.2 533.8 579.2 521.3 566.7L394.7 440C360.3 465.1 317.9 480 272 480C157.1 480 64 386.9 64 272C64 157.1 157.1 64 272 64C386.9 64 480 157.1 480 272zM272 416C351.5 416 416 351.5 416 272C416 192.5 351.5 128 272 128C192.5 128 128 192.5 128 272C128 351.5 192.5 416 272 416z"/>
          </svg>
        </span>
      </div>

      <!-- Table -->
      <div class="table-responsive">
        <table class="sensors-table">
          <thead>
            <tr>
              <th>Device Name</th>
              <th>Type</th>
              <th>Model</th>
              <th>Manufacturer</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let sensor of paginatedSensors$ | async"
                (click)="openModalAnaysis(sensor.deviceModel)"
                class="table-row">
              <td data-label="Device Name" class="device-name">
                <span class="name-text">{{sensor.name}}</span>
              </td>
              <td data-label="Type" class="td-centralize">
                <span class="device-type">{{sensor.type}}</span>
              </td>
              <td data-label="Model" class="current-value">
                {{sensor.deviceModel}}
              </td>
              <td data-label="Manufacturer" class="previous-value">
                {{sensor.manufacturer}}
              </td>
              <td data-label="Status">
                <div class="status-container">
                  <span class="status-indicator"
                        [ngClass]="{
                          'status-active': sensor.status === 'ACTIVATED'
                        }">
                  </span>
                  <span class="status-text">{{sensor.status}}</span>
                </div>
              </td>
            </tr>
            <tr *ngIf="(paginatedSensors$ | async)?.length === 0">
              <td colspan="5" class="no-data">
                <div class="empty-state">
                  <span class="icon-satelite">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                      <path d="M296 64C450.6 64 576 189.4 576 344C576 357.3 565.3 368 552 368C538.7 368 528 357.3 528 344C528 215.9 424.1 112 296 112C282.7 112 272 101.3 272 88C272 74.7 282.7 64 296 64zM272 184C272 170.7 282.7 160 296 160C397.6 160 480 242.4 480 344C480 357.3 469.3 368 456 368C442.7 368 432 357.3 432 344C432 268.9 371.1 208 296 208C282.7 208 272 197.3 272 184zM90.4 206.7C99.2 188.8 122.8 186.8 136.9 200.9L265.4 329.4L297.4 297.4C309.9 284.9 330.2 284.9 342.7 297.4C355.2 309.9 355.2 330.2 342.7 342.7L310.7 374.7L439.2 503.2C453.3 517.3 451.2 540.8 433.4 549.7C399.2 566.6 360.8 576.1 320.1 576.1C178.7 576.1 64.1 461.5 64.1 320.1C64.1 279.4 73.6 240.9 90.5 206.8z"/>
                    </svg>
                  </span>
                  <p>No devices found</p>
                  <p class="empty-subtext">Try adjusting your search criteria</p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div class="pagination">
        <button
          class="pagination-btn prev-btn"
          (click)="previousPage()"
          [disabled]="(currentPage$ | async) === 1"
          title="Previous Page"
        >
          <span class="icon-previous">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
              <path d="M566.6 342.6C579.1 330.1 579.1 309.8 566.6 297.3L406.6 137.3C394.1 124.8 373.8 124.8 361.3 137.3C348.8 149.8 348.8 170.1 361.3 182.6L466.7 288L96 288C78.3 288 64 302.3 64 320C64 337.7 78.3 352 96 352L466.7 352L361.3 457.4C348.8 469.9 348.8 490.2 361.3 502.7C373.8 515.2 394.1 515.2 406.6 502.7L566.6 342.7z"/>
            </svg>
          </span>
          Previous
        </button>

        <div class="pagination-info">
          <span class="page-number">Page {{ currentPage$ | async }}</span>
          <span class="page-total">of {{ totalPages$ | async }}</span>
        </div>

        <button
          class="pagination-btn next-btn"
          (click)="nextPage()"
          [disabled]="(currentPage$ | async) === (totalPages$ | async)"
          title="Next Page"
        >
          Next
          <span class="icon-next">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
              <path d="M566.6 342.6C579.1 330.1 579.1 309.8 566.6 297.3L406.6 137.3C394.1 124.8 373.8 124.8 361.3 137.3C348.8 149.8 348.8 170.1 361.3 182.6L466.7 288L96 288C78.3 288 64 302.3 64 320C64 337.7 78.3 352 96 352L466.7 352L361.3 457.4C348.8 469.9 348.8 490.2 361.3 502.7C373.8 515.2 394.1 515.2 406.6 502.7L566.6 342.7z"/>
            </svg>
          </span>
        </button>
      </div>
    </div>

  </div>

  <app-modal-analysis
    *ngIf="modalAnalysis"
    (sendEventcloseModalAnalysis)="consumerEventCloseModalAnalysis()"
    [deviceModal]="deviceModel">
  </app-modal-analysis>
</div>
