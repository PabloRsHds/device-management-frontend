<!-- Device Analysis Modal -->
<div class="analysis-modal">
  <div class="modal-content">

    <!-- Header -->
    <div class="modal-header">
      <div class="header-content">
        <h1 class="device-title">
          <span class="device-icon">üìä</span>
          Device Analysis: <span class="device-model">{{analysis.name}}</span>
        </h1>
        <p class="device-subtitle">Configuration, monitoring and history</p>
      </div>
      <div class="header-actions">
        <button class="action-btn reload-btn" (click)="reloadAnalysis()" title="Reload data">
          <span class="btn-icon">üîÑ</span>
          Reload
        </button>
        <button class="action-btn disable-btn" (click)="desactiveDevice(analysis.deviceModel)" title="Disable device">
          <span class="btn-icon">‚è∏Ô∏è</span>
          Disable
        </button>
        <button class="close-btn" (click)="closeModalAnalysis()" title="Close modal">
          <span>√ó</span>
        </button>
      </div>
    </div>

    <!-- Cards Grid -->
    <div class="modal-cards">

      <!-- Current Settings Card -->
      <div class="card card-settings">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">‚öôÔ∏è</span>
            Current Settings
          </h2>
          <span class="card-badge active">ACTIVE</span>
        </div>
        <div class="card-body">
          <div class="setting-item">
            <span class="setting-label">Min Limit</span>
            <span class="setting-value">{{analysis.minLimit}} {{analysis.unit}}</span>
          </div>
          <div class="separator"></div>

          <div class="setting-item">
            <span class="setting-label">Max Limit</span>
            <span class="setting-value">{{analysis.maxLimit}} {{analysis.unit}}</span>
          </div>
          <div class="separator"></div>

          <div class="setting-item">
            <span class="setting-label">Unit</span>
            <span class="setting-value unit-badge">{{analysis.unit}}</span>
          </div>
          <div class="separator"></div>

          <div class="setting-item">
            <span class="setting-label">Created At</span>
            <span class="setting-value">{{analysis.createdAt}}</span>
          </div>
          <div class="separator"></div>

          <div class="setting-item">
            <span class="setting-label">Updated At</span>
            <span class="setting-value">{{analysis.updatedAt}}</span>
          </div>
        </div>
      </div>

      <!-- Previous Configuration Card -->
      <div class="card card-history">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">üìã</span>
            Previous Configuration
          </h2>
          <span class="card-badge history">HISTORY</span>
        </div>
        <div class="card-body">
          <div class="setting-item">
            <span class="setting-label">Min Limit</span>
            <span class="setting-value">{{analysis.lastReadingMinLimit}} {{analysis.unit}}</span>
          </div>
          <div class="separator"></div>

          <div class="setting-item">
            <span class="setting-label">Max Limit</span>
            <span class="setting-value">{{analysis.lastReadingMaxLimit}} {{analysis.unit}}</span>
          </div>
          <div class="separator"></div>

          <div class="setting-item">
            <span class="setting-label">Unit</span>
            <span class="setting-value unit-badge">{{analysis.unit}}</span>
          </div>
          <div class="separator"></div>

          <div class="setting-item">
            <span class="setting-label">Last Updated</span>
            <span class="setting-value">{{analysis.lastReadingUpdateAt}}</span>
          </div>
        </div>
      </div>

      <!-- Operation Status Card -->
      <div class="card card-chart">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">üìà</span>
            Operation Status
          </h2>
        </div>
        <div class="card-body chart-container">
          <div echarts [options]="chartOptions" class="chart"></div>
        </div>
      </div>

    </div>


  </div>
</div>
