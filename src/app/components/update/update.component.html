<!-- Device Update Modal -->
<div class="update-modal">
  <div class="update-modal-content">

    <!-- Header com título e botão fechar -->
    <div class="modal-header">
      <h1 class="form-title">Update Device</h1>
      <button class="close-button" (click)="closeModalDeviceUpdate()" title="Close">
        <span>×</span>
      </button>
    </div>

    <form method="put" [formGroup]="updateForm" (ngSubmit)="handleUpdate()">
      <div class="form-container">

        <!-- Update Device Name -->
        <div class="form-section" *ngIf="!updates[0].active">
          <button class="toggle-btn" type="button" (click)="functionToggleUpdate(updates[0].id)">
            <span class="icon-name">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook-pen-icon lucide-notebook-pen">
                <path style="color: rgb(163, 163, 163)" d="M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"/>
                <path d="M2 6h4"/>
                <path d="M2 10h4"/>
                <path d="M2 14h4"/>
                <path d="M2 18h4"/>
                <path d="M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/>
              </svg>
            </span>
            Update Device Name
            <span class="icon-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path d="M439.1 297.4C451.6 309.9 451.6 330.2 439.1 342.7L279.1 502.7C266.6 515.2 246.3 515.2 233.8 502.7C221.3 490.2 221.3 469.9 233.8 457.4L371.2 320L233.9 182.6C221.4 170.1 221.4 149.8 233.9 137.3C246.4 124.8 266.7 124.8 279.2 137.3L439.2 297.3z"/>
              </svg>
            </span>
          </button>
        </div>

        <div class="form-section active" *ngIf="updates[0].active">
          <div class="input-group">
            <label class="input-label">
              <span class="icon-name">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook-pen-icon lucide-notebook-pen">
                  <path style="color: rgb(163, 163, 163)" d="M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"/>
                  <path d="M2 6h4"/>
                  <path d="M2 10h4"/>
                  <path d="M2 14h4"/>
                  <path d="M2 18h4"/>
                  <path d="M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/>
                </svg>
              </span>
              Device Name
            </label>
            <div class="input-container">
              <input
                type="text"
                formControlName="newName"
                class="form-input"
                placeholder="Enter new device name"
                autocomplete="off"
              >
              <button
                type="button"
                class="input-close"
                (click)="updates[0].active = false"
                title="Cancel update"
              >
                ×
              </button>
            </div>
          </div>
        </div>

        <!-- Update Device Model -->
        <div class="form-section" *ngIf="!updates[1].active">
          <button class="toggle-btn" type="button" (click)="functionToggleUpdate(updates[1].id)">
            <span class="icon-monitor" fill="">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path d="M128 96C92.7 96 64 124.7 64 160L64 416C64 451.3 92.7 480 128 480L272 480L256 528L184 528C170.7 528 160 538.7 160 552C160 565.3 170.7 576 184 576L456 576C469.3 576 480 565.3 480 552C480 538.7 469.3 528 456 528L384 528L368 480L512 480C547.3 480 576 451.3 576 416L576 160C576 124.7 547.3 96 512 96L128 96zM160 160L480 160C497.7 160 512 174.3 512 192L512 352C512 369.7 497.7 384 480 384L160 384C142.3 384 128 369.7 128 352L128 192C128 174.3 142.3 160 160 160z"/>
              </svg>
            </span>
            Update Device Model
            <span class="icon-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path d="M439.1 297.4C451.6 309.9 451.6 330.2 439.1 342.7L279.1 502.7C266.6 515.2 246.3 515.2 233.8 502.7C221.3 490.2 221.3 469.9 233.8 457.4L371.2 320L233.9 182.6C221.4 170.1 221.4 149.8 233.9 137.3C246.4 124.8 266.7 124.8 279.2 137.3L439.2 297.3z"/>
              </svg>
            </span>
          </button>
        </div>

        <div class="form-section active" *ngIf="updates[1].active">
          <div class="input-group">
            <label class="input-label">
              <span class="icon-monitor" fill="">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                  <path d="M128 96C92.7 96 64 124.7 64 160L64 416C64 451.3 92.7 480 128 480L272 480L256 528L184 528C170.7 528 160 538.7 160 552C160 565.3 170.7 576 184 576L456 576C469.3 576 480 565.3 480 552C480 538.7 469.3 528 456 528L384 528L368 480L512 480C547.3 480 576 451.3 576 416L576 160C576 124.7 547.3 96 512 96L128 96zM160 160L480 160C497.7 160 512 174.3 512 192L512 352C512 369.7 497.7 384 480 384L160 384C142.3 384 128 369.7 128 352L128 192C128 174.3 142.3 160 160 160z"/>
                </svg>
              </span>
              Device Model
            </label>
            <div class="input-container">
              <input
                type="text"
                formControlName="newDeviceModel"
                class="form-input"
                placeholder="Enter new device model"
                autocomplete="off"
              >
              <button
                type="button"
                class="input-close"
                (click)="updates[1].active = false"
                title="Cancel update"
              >
                ×
              </button>
            </div>
          </div>
        </div>

        <!-- Update Manufacturer -->
        <div class="form-section" *ngIf="!updates[2].active">
          <button class="toggle-btn" type="button" (click)="functionToggleUpdate(updates[2].id)">
            <span class="icon-factory">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building2-icon lucide-building-2">
                <path d="M10 12h4"/>
                <path d="M10 8h4"/>
                <path d="M14 21v-3a2 2 0 0 0-4 0v3"/>
                <path d="M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2"/>
                <path d="M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16"/>
              </svg>
            </span>
            Update Manufacturer
            <span class="icon-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path d="M439.1 297.4C451.6 309.9 451.6 330.2 439.1 342.7L279.1 502.7C266.6 515.2 246.3 515.2 233.8 502.7C221.3 490.2 221.3 469.9 233.8 457.4L371.2 320L233.9 182.6C221.4 170.1 221.4 149.8 233.9 137.3C246.4 124.8 266.7 124.8 279.2 137.3L439.2 297.3z"/>
              </svg>
            </span>
          </button>
        </div>

        <div class="form-section active" *ngIf="updates[2].active">
          <div class="input-group">
            <label class="input-label">
              <span class="icon-factory">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building2-icon lucide-building-2">
                  <path d="M10 12h4"/>
                  <path d="M10 8h4"/>
                  <path d="M14 21v-3a2 2 0 0 0-4 0v3"/>
                  <path d="M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2"/>
                  <path d="M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16"/>
                </svg>
              </span>
              Manufacturer
            </label>
            <div class="input-container">
              <input
                type="text"
                formControlName="newManufacturer"
                class="form-input"
                placeholder="Enter new manufacturer"
                autocomplete="off"
              >
              <button
                type="button"
                class="input-close"
                (click)="updates[2].active = false"
                title="Cancel update"
              >
                ×
              </button>
            </div>
          </div>
        </div>

        <!-- Update Location -->
        <div class="form-section" *ngIf="!updates[3].active">
          <button class="toggle-btn" type="button" (click)="functionToggleUpdate(updates[3].id)">
            <span class="icon-pin">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path d="M352 348.4C416.1 333.9 464 276.5 464 208C464 128.5 399.5 64 320 64C240.5 64 176 128.5 176 208C176 276.5 223.9 333.9 288 348.4L288 544C288 561.7 302.3 576 320 576C337.7 576 352 561.7 352 544L352 348.4zM328 160C297.1 160 272 185.1 272 216C272 229.3 261.3 240 248 240C234.7 240 224 229.3 224 216C224 158.6 270.6 112 328 112C341.3 112 352 122.7 352 136C352 149.3 341.3 160 328 160z"/>
              </svg>
            </span>
            Update Location
            <span class="icon-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path d="M439.1 297.4C451.6 309.9 451.6 330.2 439.1 342.7L279.1 502.7C266.6 515.2 246.3 515.2 233.8 502.7C221.3 490.2 221.3 469.9 233.8 457.4L371.2 320L233.9 182.6C221.4 170.1 221.4 149.8 233.9 137.3C246.4 124.8 266.7 124.8 279.2 137.3L439.2 297.3z"/>
              </svg>
            </span>
          </button>
        </div>

        <div class="form-section active" *ngIf="updates[3].active">
          <div class="input-group">
            <label class="input-label">
              <span class="icon-pin">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                  <path d="M352 348.4C416.1 333.9 464 276.5 464 208C464 128.5 399.5 64 320 64C240.5 64 176 128.5 176 208C176 276.5 223.9 333.9 288 348.4L288 544C288 561.7 302.3 576 320 576C337.7 576 352 561.7 352 544L352 348.4zM328 160C297.1 160 272 185.1 272 216C272 229.3 261.3 240 248 240C234.7 240 224 229.3 224 216C224 158.6 270.6 112 328 112C341.3 112 352 122.7 352 136C352 149.3 341.3 160 328 160z"/>
                </svg>
              </span>
              Location
            </label>
            <div class="input-container">
              <textarea
                rows="3"
                formControlName="newLocation"
                class="form-input textarea"
                placeholder="Enter new location"
              ></textarea>
              <button
                type="button"
                class="input-close textarea-close"
                (click)="updates[3].active = false"
                title="Cancel update"
              >
                ×
              </button>
            </div>
          </div>
        </div>

        <!-- Update Description -->
        <div class="form-section" *ngIf="!updates[4].active">
          <button class="toggle-btn" type="button" (click)="functionToggleUpdate(updates[4].id)">
            <span class="icon-paper">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook-text-icon lucide-notebook-text">
                <path style="color: rgb(177, 177, 177);" d="M2 6h4"/>
                <path style="color: rgb(177, 177, 177);" d="M2 10h4"/>
                <path style="color: rgb(177, 177, 177);" d="M2 14h4"/>
                <path style="color: rgb(177, 177, 177);" d="M2 18h4"/><rect width="16" height="20" x="4" y="2" rx="2"/>
                <path style="color: rgb(177, 177, 177);" d="M9.5 8h5"/>
                <path style="color: rgb(177, 177, 177);" d="M9.5 12H16"/>
                <path style="color: rgb(177, 177, 177);" d="M9.5 16H14"/>
              </svg>
            </span>
            Update Description
            <span class="icon-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path d="M439.1 297.4C451.6 309.9 451.6 330.2 439.1 342.7L279.1 502.7C266.6 515.2 246.3 515.2 233.8 502.7C221.3 490.2 221.3 469.9 233.8 457.4L371.2 320L233.9 182.6C221.4 170.1 221.4 149.8 233.9 137.3C246.4 124.8 266.7 124.8 279.2 137.3L439.2 297.3z"/>
              </svg>
            </span>
          </button>
        </div>

        <div class="form-section active" *ngIf="updates[4].active">
          <div class="input-group">
            <label class="input-label">
              <span class="icon-paper">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook-text-icon lucide-notebook-text">
                  <path style="color: rgb(177, 177, 177);" d="M2 6h4"/>
                  <path style="color: rgb(177, 177, 177);" d="M2 10h4"/>
                  <path style="color: rgb(177, 177, 177);" d="M2 14h4"/>
                  <path style="color: rgb(177, 177, 177);" d="M2 18h4"/><rect width="16" height="20" x="4" y="2" rx="2"/>
                  <path style="color: rgb(177, 177, 177);" d="M9.5 8h5"/>
                  <path style="color: rgb(177, 177, 177);" d="M9.5 12H16"/>
                  <path style="color: rgb(177, 177, 177);" d="M9.5 16H14"/>
                </svg>
              </span>
              Description
            </label>
            <div class="input-container">
              <textarea
                rows="4"
                formControlName="newDescription"
                class="form-input textarea"
                placeholder="Enter new description"
              ></textarea>
              <button
                type="button"
                class="input-close textarea-close"
                (click)="updates[4].active = false"
                title="Cancel update"
              >
                ×
              </button>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button
            type="submit"
            class="submit-btn"
            [disabled]="!updateForm.valid"
            [class.disabled]="!updateForm.valid"
          >
            <span class="icon-confirm">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path fill="#ffffff" d="M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z"/>
              </svg>
            </span>
            Update Device
          </button>
          <button
            type="button"
            class="cancel-btn"
            (click)="closeModalDeviceUpdate()"
          >
            <span class="icon-close">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor">
                <path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"/>
              </svg>
            </span>
            Cancel
          </button>
        </div>

      </div>
    </form>

  </div>
</div>
