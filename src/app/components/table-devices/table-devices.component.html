<div class="main-content-table">
  <div class="container">
    <div class="table-container">
      <div class="table-wrapper">
        <!-- Header com t√≠tulo e notifica√ß√µes -->
        <div class="table-header">
          <h2 class="table-title">All Devices</h2>
          <app-notifications class="notifications-component"></app-notifications>
        </div>

        <!-- Campo de busca -->
        <div class="search-box">
          <input
            type="text"
            (input)="onSearchInput($event)"
            placeholder="Search devices by name, model, type or manufacturer..."
            class="search-input"
          >
          <span class="search-icon">üîç</span>
        </div>

        <!-- Tabela de dispositivos -->
        <div class="table-responsive">
          <table class="device-table">
            <thead>
              <tr>
                <th>Device Name</th>
                <th>Type</th>
                <th>Model</th>
                <th>Description</th>
                <th>Manufacturer</th>
                <th>Min Limit</th>
                <th>Max Limit</th>
                <th>Unit</th>
                <th>Location</th>
                <th colspan="3" class="actions-column">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let device of (paginatedDevices$ | async)">
                <td data-label="Device Name">{{device.name}}</td>
                <td data-label="Type">
                  <span class="device-type">{{device.type}}</span>
                </td>
                <td data-label="Model">{{device.deviceModel}}</td>
                <td data-label="Description">
                  <button
                    class="button-info description-btn"
                    (click)="functionTableInspection(device.description)"
                    [title]="device.description || 'No description'"
                  >
                    <span>View</span>
                  </button>
                </td>
                <td data-label="Manufacturer">{{device.manufacturer}}</td>
                <td data-label="Min Limit">
                  <span class="limit-value">{{device.minLimit}}</span>
                </td>
                <td data-label="Max Limit">
                  <span class="limit-value">{{device.maxLimit}}</span>
                </td>
                <td data-label="Unit">
                  <span class="unit-badge">{{device.unit}}</span>
                </td>
                <td data-label="Location">
                  <button
                    class="button-info location-btn"
                    (click)="functionTableInspection(device.location)"
                    [title]="device.location || 'No location'"
                  >
                    <span>View</span>
                  </button>
                </td>
                <td class="action-cell" data-label="Test">
                  <button class="action-button test-button"
                    (click)="handleChangeStatus(device.deviceModel)"
                    title="Test Device">
                    Test
                  </button>
                </td>
                <td class="action-cell" data-label="Update">
                  <button class="action-button edit-button"
                    (click)="functionGetDeviceModelForUpdate(device.deviceModel)"
                    title="Update Device">
                    Update
                  </button>
                </td>
                <td class="action-cell" data-label="Delete">
                  <button class="action-button delete-button"
                    (click)="functionGetDeviceModelForDelete(device.deviceModel)"
                    title="Delete Device">
                    Delete
                  </button>
                </td>
              </tr>
              <tr *ngIf="(paginatedDevices$ | async)?.length === 0">
              <td colspan="10" class="no-data">
                <div class="empty-state">
                  <span class="empty-icon">üì°</span>
                  <p>No devices found</p>
                  <p class="empty-subtext">Try adjusting your search criteria</p>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
        </div>

        <!-- Pagina√ß√£o -->
        <div class="pagination">
          <button
            class="pagination-btn prev-btn"
            (click)="previousPage()"
            [disabled]="(currentPage$ | async) === 1"
            title="Previous Page"
          >
            ‚Üê Previous
          </button>

          <div class="pagination-info">
            <span class="page-number">Page {{ currentPage$ | async }}</span>
            <span class="page-total">of {{ totalPages$ | async }}</span>
          </div>

          <button
            class="pagination-btn next-btn"
            (click)="nextPage()"
            [disabled]="(currentPage$ | async) === (totalPages$ | async)"
            title="Next Page"
          >
            Next ‚Üí
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de descri√ß√£o -->
    <div class="modal-description" *ngIf="openModalDescription">
      <div class="modal-description-content">
        <div class="modal-header">
          <h3>Device Description</h3>
          <button class="modal-close" (click)="openModalDescription = false" title="Close">
            √ó
          </button>
        </div>
        <div class="modal-body">
          <p class="modal-description-text">{{selectedDeviceDescription || 'No description available'}}</p>
        </div>
      </div>
    </div>

    <!-- Componentes de update e delete -->
    <app-update
      *ngIf="openModalUpdate"
      [deviceModel]="deviceModel"
      (sendEventCloseModalUpdate)="getEventCloseModalUpdate()">
    </app-update>

    <app-delete-device
      *ngIf="openModalDelete"
      [deviceModel]="deviceModel"
      (sendEventCloseModalDeviceDelete)="consumerEventCloseModalDeviceDelete()">
    </app-delete-device>
  </div>
</div>
